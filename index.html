<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ö–µ–π—Å—ã –∑–∞ ‚≠ê ‚Äî Telegram Mini App</title>

  <!-- libs -->
  <script src="https://telegram.org/js/telegram-web-app.js" crossorigin="anonymous"></script>
  <script src="https://cdn.tailwindcss.com" crossorigin="anonymous"></script>
  <script>tailwind.config={darkMode:'class',theme:{extend:{}}};</script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- error catcher -->
  <script>
    (function(){
      const show=(title,detail)=>{
        try{const box=document.getElementById('err');
        if(box){box.style.display='block';box.textContent=`${title}\n${detail||''}`;}}catch(_){}
      };
      window.onerror=(m,src,line,col,err)=>{
        show(`JS error: ${m}`,[`source: ${src||'-'}`,`line: ${line||'-'}, col: ${col||'-'}`,`stack: ${(err&&err.stack)||'-'}`].join('\n'));
      };
      window.addEventListener('unhandledrejection',e=>{
        show('Promise error',(e.reason&&e.reason.stack)||String(e.reason));
      });
    })();
  </script>

  <style>
    :root{
      --black:#0A0B0C;
      --white:#FFFFFF;
      --nardo:#8E9492; /* Nardo Grey */
      --orange:#FF7A1A;
      --bg-1:#0c0e11;
      --border:#272a2e;
    }
    html,body,#root{height:100%;}
    body{
      background:
        radial-gradient(1200px 800px at 15% -10%, #14181e 0%, transparent 60%),
        radial-gradient(1000px 700px at 120% 0%, #191a1f 0%, transparent 55%),
        linear-gradient(180deg,#0b0d10 0%, #090a0c 100%);
      color:var(--white);
      font-family:'Manrope',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    }
    @keyframes fadeInUp { from { opacity:0; transform: translateY(10px) scale(.98);} to { opacity:1; transform: translateY(0) scale(1);} }
    .fade-in{ animation: fadeInUp .38s cubic-bezier(.2,.8,.2,1) both; }
    .mini-fan{ position:relative; height:70px; display:flex; align-items:flex-end; justify-content:center; }
    .mini-card{ width:58px; height:74px; border-radius:12px; background:#111418; border:1px solid var(--border);
      display:flex; align-items:center; justify-content:center; position:relative; box-shadow:0 12px 28px rgba(0,0,0,.35); }
    .glow-common{ box-shadow:0 0 0 2px rgba(142,148,146,.45) inset, 0 12px 26px rgba(0,0,0,.35);}
    .glow-rare{ box-shadow:0 0 0 2px rgba(120,180,255,.55) inset, 0 12px 26px rgba(0,0,0,.35);}
    .glow-epic{ box-shadow:0 0 0 2px rgba(180,120,255,.55) inset, 0 12px 26px rgba(0,0,0,.35);}
    .glow-legendary{ box-shadow:0 0 0 2px rgba(255,122,26,.70) inset, 0 12px 26px rgba(0,0,0,.35);}
    .hfeed-wrap{ margin-top:10px; margin-bottom:12px;}
    .hfeed{ display:flex; gap:10px; overflow-x:auto; -webkit-overflow-scrolling:touch; padding-bottom:2px; }
    .hfeed::-webkit-scrollbar{ display:none; }
    .hfeed-item{ min-width:220px; border-radius:14px; border:1px solid var(--border);
      background:linear-gradient(135deg,#14171b,#0d0f12); padding:10px 12px;
      display:flex; align-items:center; justify-content:space-between; }
    .cases-grid{ display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:1rem; }
    .hand{ position:relative; height:186px; display:flex; justify-content:center; align-items:flex-end; pointer-events:none; }
    .hand-card{ position:relative; pointer-events:auto; margin-left:-44px; transition:transform .35s cubic-bezier(.2,.8,.2,1);}
    .hand-card:first-child{ margin-left:0; }
    .flip-card{ width:120px; height:160px; position:relative; transform-style:preserve-3d; transition:transform 680ms cubic-bezier(.2,.8,.2,1);
      border-radius:16px; box-shadow:0 16px 34px rgba(0,0,0,.42); }
    .flip-card.flipped{ transform:rotateY(180deg); }
    .flip-face{ position:absolute; inset:0; border-radius:16px; backface-visibility:hidden; display:flex; align-items:center; justify-content:center; border:1px solid var(--border); }
    .flip-face.front{ background:linear-gradient(135deg,#151920,#0f1216); color:#eaeef2; }
    .flip-face.back{ background:#0f1114; transform:rotateY(180deg); }
    .glow-common-b{ box-shadow:0 0 0 2px rgba(142,148,146,.45), 0 0 18px rgba(142,148,146,.22); }
    .glow-rare-b{ box-shadow:0 0 0 2px rgba(120,180,255,.55), 0 0 20px rgba(120,180,255,.28); }
    .glow-epic-b{ box-shadow:0 0 0 2px rgba(180,120,255,.60), 0 0 22px rgba(180,120,255,.30); }
    .glow-legendary-b{ box-shadow:0 0 0 2px rgba(255,122,26,.70), 0 0 24px rgba(255,122,26,.35); }
    .btn-primary{ background:linear-gradient(180deg,var(--orange),#ea6f0c);
      color:#111; border:none; border-radius:16px; padding:.9rem 1.05rem; font-weight:800;
      box-shadow:0 8px 24px rgba(255,122,26,.28), 0 0 0 1px rgba(255,122,26,.35) inset; }
    .btn-secondary{ background:#101317; color:#e4e4e7; border:1px solid var(--border); border-radius:14px; padding:.75rem .95rem; font-weight:700; }
    .tabbar{ display:flex; gap:10px;}
    .tab-btn{ flex:1 1 0; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:4px;
      padding:10px 6px; border-radius:14px; border:1px solid var(--border); background:#0f1216; font-weight:800;
      transition: transform .12s ease, filter .15s ease, box-shadow .25s ease, border-color .25s ease; }
    .tab-btn.active{ border-color:rgba(255,122,26,.65); }
  </style>
</head>

<body>
  <div id="root"></div>
  <pre id="err" style="display:none; position:fixed; left:8px; bottom:64px; right:8px; max-height:40vh; overflow:auto; background:#111; color:#fff; padding:8px; border-radius:8px; z-index:9999"></pre>

  <script type="text/babel">
    const { useState } = React;
    const glowMini = (r)=>({common:'glow-common',rare:'glow-rare',epic:'glow-epic',legendary:'glow-legendary'}[r]||'');
    const top3Prizes = (list=[]) => list.slice(0,3);

    const MiniCards = ({ prizes }) => {
      const picks = top3Prizes(prizes);
      const fan = [{rot:-14,x:-16,z:10,s:0.98,ml:0},{rot:0,x:0,z:30,s:1.06,ml:-24},{rot:14,x:16,z:20,s:0.98,ml:-24}];
      return (
        <div className="mini-fan mt-2">
          {picks.map((p,i)=>(
            <div key={i} className={`mini-card ${glowMini(p.rarity)}`} 
                 style={{transform:`translateX(${fan[i].x}px) rotate(${fan[i].rot}deg) scale(${fan[i].s})`,
                         zIndex:fan[i].z, marginLeft:i===0?0:fan[i].ml}}>
              {p.emoji}
            </div>
          ))}
        </div>
      );
    };

    const HomeCaseCard = ({ c, onClick }) => (
      <div onClick={onClick} role="button" className="rounded-2xl p-4 border transition cursor-pointer fade-in"
           style={{background:'#0b0f14', borderColor:'var(--border)'}}>
        <MiniCards prizes={c.prizes}/>
        <div className="mt-3 flex flex-col items-center justify-center text-center fade-in">
          <div className="text-base font-extrabold">{c.title}</div>
          <div className="text-xs" style={{color:'var(--nardo)'}}>{c.description}</div>
          <div className="mt-2 text-xs" style={{color:'var(--nardo)'}}>–¶–µ–Ω–∞: <span style={{color:'#fff'}}>{c.priceStars} ‚≠ê</span></div>
        </div>
      </div>
    );

    function App(){
      const [cases]=useState([
        {id:'lite',title:'–õ–∞–π—Ç-–∫–µ–π—Å',priceStars:3,description:'–î–µ—à—ë–≤—ã–π –≤—Ö–æ–¥',prizes:[{emoji:'‚≠ê',rarity:'common'},{emoji:'üí•',rarity:'epic'},{emoji:'üöÄ',rarity:'legendary'}]},
        {id:'pro',title:'–ü—Ä–æ-–∫–µ–π—Å',priceStars:12,description:'–ë–æ–ª—å—à–æ–π —Ä–∏—Å–∫',prizes:[{emoji:'üåü',rarity:'rare'},{emoji:'üé®',rarity:'epic'},{emoji:'üèÜ',rarity:'legendary'}]},
        {id:'starter',title:'–°—Ç–∞—Ä—Ç–æ–≤—ã–π –∫–µ–π—Å',priceStars:6,description:'–î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤',prizes:[{emoji:'üò∫',rarity:'common'},{emoji:'üèÖ',rarity:'rare'},{emoji:'üí´',rarity:'legendary'}]},
        {id:'ultra',title:'–£–ª—å—Ç—Ä–∞-–∫–µ–π—Å',priceStars:30,description:'–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–µ –Ω–∞–≥—Ä–∞–¥—ã',prizes:[{emoji:'üßø',rarity:'epic'},{emoji:'üèÜ',rarity:'legendary'},{emoji:'ü¶Ñ',rarity:'legendary'}]}
      ]);
      return (
        <div className="min-h-dvh pb-20 px-4 py-5">
          <div className="mx-auto max-w-md">
            <section className="mt-3 cases-grid">
              {cases.map(c=><HomeCaseCard key={c.id} c={c} onClick={()=>alert(c.title)}/>)}
            </section>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
  </script>
</body>
</html>
